$input-affix-width : 1rem;

$input-padding-horizontal       : 0.5rem !default;
$input-padding-vertical-base    : 0.25rem !default;
$input-padding-vertical-sm      : 0.125rem !default;
$input-padding-vertical-lg      : 0.375rem !default;

// size mixins for input
@mixin input-lg() {
  padding     : $input-padding-vertical-lg $input-padding-horizontal;
  height      : $input-height-lg;
  line-height : $input-line-height-lg;
}

@mixin input-sm() {
  padding     : $input-padding-vertical-sm $input-padding-horizontal;
  height      : $input-height-sm;
  line-height : $input-line-height-sm;
}

// input status
// == when focus or actived
@mixin active($color: $outline-color) {
  border-color : tri-color-palette($color, 5);
  outline      : 0;
  box-shadow   : 0 0 $outline-blur-size $outline-width rgba($color, 0.20);
}

// == when hoverd
@mixin hover($color: $input-hover-border-color) {
  border-color : tri-color-palette($color, 5);
}

@mixin disabled($theme) {
  $foreground: map-get($theme, foreground);
  $background: map-get($theme, background);

  background-color : tri-color($foreground, input-disabled-bg);
  opacity          : 1;
  cursor           : not-allowed;
  color            : tri-color($foreground, disabled-color);
  @at-root &:hover {
    @include hover(tri-color($foreground, input-border-color));
  }
}

// Basic style for input
@mixin input() {
  position    : relative;
  display     : inline-block;
  padding     : $input-padding-vertical-base $input-padding-horizontal;
  width       : 100%;
  height      : $input-height-base;
  cursor      : text;
  font-size   : $font-size-base;
  line-height : $input-line-height;
  color       : $input-color;
  background  : $input-bg none;
  border      : $border-width-base $border-style-base $input-border-color;
  @include border-radius($border-radius-base);
  @include placeholder($theme);
  transition  : all .3s;

  @at-root &:hover {
    @include hover();
  }

  @at-root &:focus {
    @include active();
  }

  @at-root &-disabled {
    @include disabled();
  }

  // Reset height for `textarea`s
  @at-root textarea#{&} {
    max-width      : 100%; // prevent textearea resize from coming out of its container
    height         : auto;
    vertical-align : bottom;
  }

  // Size
  @at-root &-lg {
    @include input-lg();
  }

  @at-root &-sm {
    @include input-sm();
  }
}

@mixin input-affix-wrapper($inputClass) {
  position : relative;
  display  : inline-block;
  width    : 100%;

  .#{$inputClass} {
    z-index : 1;
  }

  @at-root &:hover .#{$inputClass}:not(.#{$inputClass}-disabled) {
    @include hover();
  }

  .#{$inputClass}-prefix,
  .#{$inputClass}-suffix {
    position    : absolute;
    top         : 50%;
    transform   : translateY(-50%);
    z-index     : 2;
    line-height : 0;
    color       : $input-color;
  }

  .#{$inputClass}-prefix {
    left : $input-padding-horizontal;
  }

  .#{$inputClass}-suffix {
    right : $input-padding-horizontal;
  }

  .#{$inputClass}:not(:first-child) {
    padding-left : $input-padding-horizontal + $input-affix-width;
  }

  .#{$inputClass}:not(:last-child) {
    padding-right : $input-padding-horizontal + $input-affix-width;
  }
}
