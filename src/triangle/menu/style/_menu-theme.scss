@import "../../core/themes/default-theme";

$menu-prefix-cls : "#{$ant-prefix}-menu" !default;

@mixin tri-menu-theme($theme) {
  $foreground           : map-get($theme, foreground);
  $background           : map-get($theme, background);
  $primary              : map-get($theme, primary);

  $menu-collapsed-width : 64px !default;
  $menu-font-size       : $font-size-base !default;

  // Menu
  // ---
  $menu-dark-bg         : tri-color($background, layout-header-background);
  $menu-dark-submenu-bg : #333 !default;

  // default theme
  .#{$menu-prefix-cls} {
    box-shadow : $box-shadow-base;
    color      : tri-color($foreground, text-color);
    background : tri-color($foreground, component-background);

    @at-root &-item-group-title {
      color : tri-color($foreground, text-color-secondary);
    }

    @at-root &-item:active,
    &-submenu-title:active {
      background : tri-color($foreground, item-active-bg);
    }

    @at-root &-item > a {
      color : tri-color($foreground, text-color);
      @at-root &:hover {
        color : tri-color($primary);
      }
      @at-root &:before {
        background-color : transparent;
      }
    }

    @at-root &-item-divider {
      background-color : tri-color($foreground, border-color-split);
    }

    @at-root &-item:hover,
    &-item-active,
    &:not(#{&}-inline) #{&}-submenu-open,
    &-submenu-active,
    &-submenu-title:hover {
      color : tri-color($primary);
    }

    @at-root &-horizontal > #{&}-item:hover,
    &-horizontal > #{&}-item-active,
    &-horizontal > #{&}-submenu #{&}-submenu-title:hover {
      background-color : transparent;
    }

    @at-root &-item-selected {
      color : tri-color($primary);
      > a,
      > a:hover {
        color : tri-color($primary);
      }
    }

    @at-root &:not(#{&}-horizontal) #{&}-item-selected {
      background-color : tri-color($foreground, item-active-bg);
    }

    @at-root & > #{&}-item-divider {
      background-color : tri-color($foreground, border-color-split);
    }

    @at-root &-submenu {
      > .#{$menu-prefix-cls} {
        background-color : tri-color($background, component-background);
      }
    }

    @at-root &-vertical #{&}-submenu-selected {
      color : tri-color($primary);
      > a {
        color : tri-color($primary);
      }
    }

    // Disabled state sets text to gray and nukes hover/tab effects
    @at-root &-item-disabled,
    &-submenu-disabled {
      color        : tri-color($foreground, disabled-color) !important;
      background   : none;
      border-color : transparent !important;
      > a {
        color : tri-color($foreground, disabled-color) !important;
      }

      > .#{$menu-prefix-cls}-submenu-title {
        color : tri-color($foreground, disabled-color) !important;
      }
    }
  }

  // dark theme
  .#{$menu-prefix-cls} {
    @at-root &-dark,
    &-dark #{&}-sub {
      color      : tri-color($foreground, text-color-secondary-dark);
      background : $menu-dark-bg;
    }

    @at-root &-dark #{&}-inline#{&}-sub {
      background : $menu-dark-submenu-bg;
    }

    @at-root &-dark#{&}-horizontal {
      border-bottom-color : $menu-dark-bg;
    }

    @at-root &-dark#{&}-horizontal > #{&}-item,
    &-dark#{&}-horizontal > #{&}-submenu {
      border-color  : $menu-dark-bg;
      border-bottom : 0;
    }

    @at-root &-dark #{&}-item,
    &-dark #{&}-item-group-title,
    &-dark #{&}-item > a {
      color : tri-color($foreground, text-color-secondary-dark);
    }

    @at-root &-dark#{&}-inline,
    &-dark#{&}-vertical {
      border-right : 0;
    }

    @at-root &-dark#{&}-inline #{&}-item,
    &-dark#{&}-vertical #{&}-item {
      border-right : 0;
      margin-left  : 0;
      left         : 0;
      @at-root &:after {
        border-right : 0;
      }
    }

    @at-root &-dark #{&}-item:hover,
    &-dark #{&}-item-active,
    &-dark #{&}-submenu-active,
    &-dark:not(#{&}-inline) #{&}-submenu-open,
    &-dark #{&}-submenu-selected,
    &-dark #{&}-submenu:hover,
    &-dark #{&}-submenu-title:hover {
      background-color : transparent;
      color            : #fff;
      > a {
        color : #fff;
      }
    }

    @at-root &-dark #{&}-item-selected {
      border-right : 0;
      color        : #fff;
      @at-root &:after {
        border-right : 0;
      }
      > a,
      > a:hover {
        color : #fff;
      }
    }

    @at-root &#{&}-dark #{&}-item-selected {
      background-color : tri-color($foreground, primary-color);
    }

    // Disabled state sets text to dark gray and nukes hover/tab effects
    @at-root &-dark #{&}-item-disabled,
    &-dark #{&}-submenu-disabled {
      @at-root &,
      & > a {
        opacity : 0.8;
        color   : tri-color($foreground, disabled-color-dark) !important;
      }
      > .#{$menu-prefix-cls}-submenu-title {
        color : tri-color($foreground, disabled-color-dark) !important;
      }
    }
  }
}