<div
  cdkOverlayOrigin
  #origin="cdkOverlayOrigin"
  #trigger>
  <div *ngIf="showInput">
    <input #input
      tri-input
      [attr.autoComplete]="'off'"
      [attr.placeholder]="showPlaceholder ? placeHolder : null"
      [attr.autofocus]="autoFocus ? 'autofocus' : null"
      [readonly]="!showSearch"
      [disabled]="disabled"
      [size]="size"
      [class.tri-cascader-input]="true"
      [class.tri-input-disabled]="disabled"
      [class.tri-input-lg]="size === 'large'"
      [class.tri-input-sm]="size === 'small'"
      [(ngModel)]="inputValue"
      (blur)="handleInputBlur($event)"
      (focus)="handleInputFocus($event)"
      (change)="handlerInputChange($event)">
    <i *ngIf="showClearIcon"
      class="anticon anticon-cross-circle tri-cascader-picker-clear"
      [attr.title]="clearText"
      (click)="clearSelection($event)"></i>
    <i *ngIf="showArrow && !isLoading"
      class="anticon anticon-down tri-cascader-picker-arrow"
      [class.tri-cascader-picker-arrow-expand]="menuVisible"></i>
    <i *ngIf="isLoading"
      class="anticon anticon-loading anticon-spin tri-cascader-picker-arrow"></i>
    <span class="tri-cascader-picker-label"
          [class.tri-cascader-show-search]="showSearch"
          [class.tri-cascader-focused]="showSearch&&isFocused&&!inputValue">
          <ng-container *ngIf="!isLabelRenderTemplate; else labelTemplate">{{ labelRenderText }}</ng-container>
          <ng-template #labelTemplate>
            <ng-template [ngTemplateOutlet]="labelRender" [ngTemplateOutletContext]="labelRenderContext"></ng-template>
          </ng-template>
        </span>
  </div>
  <ng-content></ng-content>
</div>
<ng-template
  cdkConnectedOverlay
  cdkConnectedOverlayHasBackdrop
  cdkConnectedOverlayBackdropClass="cdk-overlay-transparent-backdrop"
  [cdkConnectedOverlayOrigin]="origin"
  [cdkConnectedOverlayPositions]="positions"
  (backdropClick)="closeMenu()"
  (detach)="closeMenu()"
  (positionChange)="onPositionChange($event)"
  [cdkConnectedOverlayOpen]="menuVisible">
  <div #menu
    [class.tri-cascader-menus]       = "true"
    [class.tri-cascader-menus-hidden]="!menuVisible"
    [ngStyle]="menuStyle"
    [@dropDownAnimation]="dropDownPosition"
    (mouseleave)="onTriggerMouseLeave($event)">

    <ul *ngFor="let options of columns; let i = index;" class="tri-cascader-menu">
      <div class="tri-cascader-menu-title" *ngIf="options.length>0&&options[0].title"><span>{{options[0].title}}</span></div>
      <li *ngFor="let option of options"
        [attr.title]="getOptionLabel(option)"
        [class.tri-cascader-menu-item]         = "true"
        [class.tri-cascader-menu-item-expand]  = "!option.isLeaf"
        [class.tri-cascader-menu-item-active]  = "isActivedOption(option, i)"
        [class.tri-cascader-menu-item-disabled]="option.disabled"
        [class.tri-cascader-menu-item-loading] = "option.loading"
        (mouseenter)="onOptionMouseEnter(option, i, $event)"
        (mouseleave)="onOptionMouseLeave(option, i, $event)"
        (click)="onOptionClick(option, i, $event)">
        {{ getOptionLabel(option) }}
      </li>
    </ul>
  </div>
</ng-template>
